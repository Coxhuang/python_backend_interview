[TOC]


# 笔试题




## #1 如何在 Python 中管理内存?

> Python 用一个私有堆内存空间来放置所有对象和数据结构，我们无法访问它。由解释器来管理它。不过使用一些核心 API，我们可以访问一些 Python 内存管理工具控制内存分配。

## #2  如何随机打乱列表中元素，要求不引用额外的内存空间？

> 我们用 random 包中的 shuffle() 函数来实现。

## #3 Python 中标识符的命名规则？

- 只能以下划线或者 A-Z/a-z 中的字母开头。
- 其余部分只能使用 A-Z/a-z/0-9
- Python 标识符区分大小写。
- 关键字不能作为标识符。

## #3 如何删除字符串中的前置空格

- 去除了前置空格 : lstrip()
- 去除了前置空格 : rstrip()

## #4 如何将字符串转换为小写？

- 小写 : lower()
- 大写 : upper()
- 校验全大写 : isupper()
- 校验全小写 : islower()


## #5 请解释 Python 中的闭包？

> 如果在一个内部函数里。对在外部作用域（但不是在全局作用域）的变量进行引用，那么内部函数就是一个闭包。

## #6 解释 Python 中的//，％和**运算符

- //运算符执行地板除法，返回结果的整数部分 (向下取整)。
- \*\*符号表示取幂. a**b 返回 a 的 b 次方
- % 是取模符号。返回除法后的余数。

## #6 多进程间共享数据

> 可以使用 multiprocessing.Value 和 multiprocessing.Array



## #7 列表推导式书写形式

- [表达式 for 变量 in 列表] 
- [表达式 for 变量 in 列表 if 条件]



```
>>> [ (x, y) for x in range(10) if x % 2 if x > 3 for y in range(10) if y > 7 if y != 8 ]
[(5, 9), (7, 9), (9, 9)]
>>> dict([ (x, y) for x in range(10) if x % 2 if x > 3 for y in range(10) if y > 7 if y != 8 ])
{5: 9, 7: 9, 9: 9}
```

![20190510214544-image.png](https://raw.githubusercontent.com/Coxhuang/yosoro/master/20190510214544-image.png)


## #8 lambda


```
>>> sum = lambda arg1, arg2: arg1 + arg2;
>>> sum( 10, 20 )
30
>>> sum( 20, 20 )
40
```

## #9 Fibonacci数列

- 非递归

```python
def fab(max_val):
    a,b = 0, 1
    n = 0
    while n<max_val:
        print (a),
        n += 1
        a, b = b, a+b
    
    return None
```

- 生成器

```python
def fab(max): 
    n, a, b = 0, 0, 1 
    while n < max: 
        yield b      # 使用 yield
        a, b = b, a + b 
        n = n + 1
 
for n in fab(5): 
    print n
```


- 递归

```python
def fab(n):
    if (n == 1 or n == 2):
        return 1
    else:
        return fib(n - 1) + fib(n - 2)
print(fab(9))
```

## #10 None

```
a = []
b = {}
c = ''
print(bool(a))
print(bool(b))
print(bool(c))
False
False
False
```

## #11 倒序

- list

```
for x in reversed([1,2,3,4,5,6,7,8,9]):
    print(x)
```

- other

```
sequence = [1,2,3,4,5,6,7,8,9]
for i in range(len(sequence)-1, -1, -1):
    x = sequence[i]
    print(x)
```

## #12 split() 和 rsplit()

> 正序分割

```
str1.split(str="", num=string.count(str))
# str : 分隔符，默认为所有的空字符，包括空格、换行(\n)、制表符(\t)等。
# num : 分割次数。默认为 -1, 即分隔所有。
```


> 倒序分割

```
str1.rsplit(str="", num=string.count(str))
# str : 分隔符，默认为所有的空字符，包括空格、换行(\n)、制表符(\t)等。
# num : 分割次数。默认为 -1, 即分隔所有。
```



## #13 range() 和 xrange()

> 创建一个整数列表，一般用在 for 循环中。

```
range(start, stop, step)

# start : 计数从 start 开始。默认是从 0 开始。例如range（5）等价于range（0， 5）;
# stop : 计数到 stop 结束，但不包括 stop。例如：range（0， 5） 是[0, 1, 2, 3, 4]没有5
# step : 步长，默认为1。例如：range（0， 5） 等价于 range(0, 5, 1)
```

> 用法与 range 完全相同，所不同的是生成的不是一个数组，而是一个生成器。


```
>>>xrange(8)
xrange(8)
>>> list(xrange(8))
[0, 1, 2, 3, 4, 5, 6, 7]
>>> range(8)                 # range 使用
[0, 1, 2, 3, 4, 5, 6, 7]
>>> xrange(3, 5)
xrange(3, 5)
>>> list(xrange(3,5))
[3, 4]
>>> range(3,5)               # 使用 range
[3, 4]
>>> xrange(0,6,2)
xrange(0, 6, 2)              # 步长为 2
>>> list(xrange(0,6,2))
[0, 2, 4]
```

## #14 


```
1. 楼主了解 http 协议吗？建议了解一下。
2. 看到楼主有用过 flask 和 django，那么建议了解一下 wsgi 规范，参考 bottle，自己写个小框架
3. 建议了解一下 redis，了解起常用数据结构，可以利用 redis 给你的网站做缓存，也可以做个粗略的在线人数统计。
4. 了解 Python 的一些语法糖，可以参考前两天某位 v 友写的文章，很不错 https://www.v2ex.com/t/458070#reply31
5. 如果没了解过的话，了解一下套接字编程，了解如何利用多线程，多进程处理并发。了解 epoll 和 select 这些异步 io 是怎么做的
6. 建议可以了解一下协程，可以读一读 tornado 如何在 epoll 上封装的协程
7. 看到你简历上写 stackoverflow 么，建议注册个账号刷一刷，刷个几百分，不难。
```

## #15 简述面向对象中__new__和__init__区别

```
1、__new__至少要有一个参数cls，代表当前类，此参数在实例化时由Python解释器自动识别

2、__new__必须要有返回值，返回实例化出来的实例，这点在自己实现__new__时要特别注意，可以return父类（通过super(当前类名, cls)）__new__出来的实例，或者直接是object的__new__出来的实例

3、__init__有一个参数self，就是这个__new__返回的实例，__init__在__new__的基础上可以完成一些其它初始化的动作，__init__不需要返回值

4、如果__new__创建的是当前类的实例，会自动调用__init__函数，通过return语句里面调用的__new__函数的第一个参数是cls来保证是当前类实例，如果是其他类的类名，；那么实际创建返回的就是其他类的实例，其实就不会调用当前类的__init__函数，也不会调用其他类的__init__函数。

```



## #16 避免转义给字符串加哪个字母表示原始字符串？


```
r , 表示需要原始字符串，不转义特殊字符
```

## #17 数据表student有id,name,score,city字段，其中name中的名字可有重复，需要消除重复行,请写sql语句


```
select  distinct  name  from  student
```



## #18 索引的作用？和它的优点缺点是什么？

> 索引就一种特殊的查询表，数据库的搜索引擎可以利用它加速对数据的检索。它很类似与现实生活中书的目录，不需要查询整本书内容就可以找到想要的 数据。索引可以是唯一的，创建索引允许指定单个列或者是多个列。缺点是它减慢了数据录入的速度，同时也增加了数据库的尺寸大小。

## #19 mysql 什么是事务？什么是锁？

> 事务就是被绑定在一起作为一个逻辑工作单元的SQL语句分组，如果任何一个语句操作失败那么整个操作就被失败，以后操作就会回滚到操作前状态，或者是上有个节点。为了确保要么执行，要么不执行，就可以使用事务。要将有组语句作为事务考虑，就需要通过ACID测试，即原子性，一致性，隔离性和持久性。

> 锁：在所以的DBMS中，锁是实现事务的关键，锁可以保证事务的完整性和并发性。与现实生活中锁一样，它可以使某些数据的拥有者，在某段时间内不能使用某些数据或数据结构。当然锁还分级别的。

## # 19 Python是如何进行内存管理的？

**对象的引用计数机制**

> Python内部使用引用计数，来保持追踪内存中的对象，所有对象都有引用计数。

总结一下对象会在一下情况下引用计数加1：

- 对象被创建：x=‘spam’
- 另外的别人被创建：y=x
- 被作为参数传递给函数：foo(x)
- 作为容器对象的一个元素：a=[1,x,‘33’]

引用计数减少情况:
- 一个本地引用离开了它的作用域。比如上面的foo(x)函数结束时，x指向的对象引用减1。
- 对象的别名被显式的销毁：del x ；或者del y
- 对象的一个别名被赋值给其他对象：x=789
- 对象从一个窗口对象中移除：myList.remove(x)
- 窗口对象本身被销毁：del myList，或者窗口对象本身离开了作用域。

**垃圾回收**

- 当内存中有不再使用的部分时，垃圾收集器就会把他们清理掉。它会去检查那些引用计数为0的对象，然后清除其在内存的空间。当然除了引用计数为0的会被清除，还有一种情况也会被垃圾收集器清掉：当两个对象相互引用时，他们本身其他的引用已经为0了。
- 垃圾回收机制还有一个循环垃圾回收器, 确保释放循环引用对象(a引用b, b引用a, 导致其引用计数永远不为0)。

> 在Python中，许多时候申请的内存都是小块的内存，这些小块内存在申请后，很快又会被释放，由于这些内存的申请并不是为了创建对象，所以并没有对象一级的内存池机制。这就意味着Python在运行期间会大量地执行malloc和free的操作，频繁地在用户态和核心态之间进行切换，这将严重影响Python的执行效率。为了加速Python的执行效率，Python引入了一个内存池机制，用于管理对小块内存的申请和释放。

**内存池机制**

- Python提供了对内存的垃圾收集机制，但是它将不用的内存放到内存池而不是返回给操作系统；
- Pymalloc机制：为了加速Python的执行效率，Python引入了一个内存池机制，用于管理对小块内存的申请和释放；
- 对于Python对象，如整数，浮点数和List，都有其独立的私有内存池，对象间不共享他们的内存池。也就是说如果你分配又释放了大量的整数，用于缓存这些整数的内存就不能再分配给浮点数。


## #20 写一个函数, 输入一个字符串, 返回倒序排列的结果


```python
def order_by(str):
    return str[::-1]
 
print(order_by('123456'))
 
输出：654321
```

## #21 Python里面search()和match()的区别？
它们两个都在re模块中

- match()函数是在string的开始位置匹配，如果不匹配，则返回None;
- search()会扫描整个string查找匹配;


## #22 range 和 xrange 的区别？

- range([start,] stop[, step])，根据start与stop指定的范围以及step设定的步长，生成一个序列。注意这里是生成一个序列。
- xrange的用法与range相同，即xrange([start,] stop[, step])根据start与stop指定的范围以及step设定的步长,它所不同的是xrange并不是生成序列，而是作为一个生成器。即她的数据生成一个取出一个。
- 两者用法相同，不同的是 range 返回的结果是一个列表，而 xrange 的结果是一个生成器，前者是
直接开辟一块内存空间来保存列表，后者是边循环边使用，只有使用时才会开辟内存空间，所以相对来说，xrange比range性能优化很多，因为他不需要一下子开辟一块很大的内存，特别是数据量比较大的时候。
- xrange和range这两个基本是使用在循环的时候。
- 当需要输出一个列表的时候，就必须要使用range了。


## #23 如何检查字符串中所有的字符都为字母数字？

- str.isalnum() 所有字符都是数字或者字母
- str.isalpha() 所有字符都是字母
- str.isdigit() 所有字符都是数字
- str.isspace() 所有字符都是空白字符、t、n、r


## #24 是否了解线程的同步和异步？

- 线程同步：多个线程同时访问同一资源，等待资源访问结束，浪费时间，效率低
> 例子:你说完，我再说。

- 线程异步：在访问资源时在空闲等待时同时访问其他资源，实现多线程机制
> 你喊朋友吃饭，朋友说知道了，待会忙完去找你 ，你就去做别的了。


## #25 为什么建立连接是三次握手，而关闭连接却是四次挥手呢？

**这是因为服务端在LISTEN状态下，收到建立连接请求的SYN报文后，把ACK和SYN放在一个报文里发送给客户端。而关闭连接时，当收到对方的FIN报文时，仅仅表示对方不再发送数据了但是还能接收数据，己方也未必全部数据都发送给对方了，所以己方可以立即close，也可以发送一些数据给对方后，再发送FIN报文给对方来表示同意现在关闭连接，因此，己方ACK和FIN一般都会分开发送。**





